{"ast":null,"code":"import React,{useState}from'react';import axios from'axios';import{Link,useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const FileUpload=_ref=>{let{token}=_ref;console.log('Token being sent:',token);const[file,setFile]=useState(null);const[message,setMessage]=useState('');const[userFiles,setUserFiles]=useState([]);const navigate=useNavigate();const handleFileChange=e=>{setFile(e.target.files[0]);};const handleFileUpload=async()=>{if(!file){setMessage('Please select a file');return;}if(!token){setMessage('No token, please log in.');return;}console.log('Token being sent:',token);const formData=new FormData();formData.append('file',file);try{await axios.post('http://localhost:5000/api/files/upload',formData,{headers:{'Authorization':\"Bearer \".concat(token),'Content-Type':'multipart/form-data'}});setMessage('File uploaded successfully');}catch(error){console.error('Error response:',error.response);if(error.response&&error.response.status===401){setMessage('Authorization failed, please check your token.');}else{setMessage('Error uploading file');}}};/* const handleViewFiles = async () => {\n\t\tif (!token) {\n\t\t\tsetMessage('You must be logged in to view files.');\n\t\t\treturn;\n\t\t}\n\t\t          \n\t\ttry {\n\t\t\tconst response = await axios.get('http://localhost:5000/api/files/user/files', {\n\t\t\t\theaders: {\n\t\t\t\t\t'Authorization': `Bearer ${token}`,\n\t\t\t\t},\n\t\t\t});\n\t\t\tsetUserFiles(response.data);\n\t\t} catch (error) {\n\t\t\tconsole.error('Error fetching files:', error);\n\t\t\tsetMessage('Error fetching files.');\n\t\t}\n\t};*/const goToUserFiles=()=>{navigate('/user-files');};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:handleFileChange}),/*#__PURE__*/_jsx(\"button\",{onClick:handleFileUpload,children:\"Upload\"}),/*#__PURE__*/_jsx(\"p\",{children:message})]}),/*#__PURE__*/_jsx(\"div\",{className:\"home-button\",children:/*#__PURE__*/_jsx(Link,{to:\"/\",children:/*#__PURE__*/_jsx(\"button\",{children:\"Logout\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"user-files-button\",children:/*#__PURE__*/_jsx(\"button\",{onClick:goToUserFiles,children:\"View My Files\"})})]});};export default FileUpload;","map":{"version":3,"names":["React","useState","axios","Link","useNavigate","jsx","_jsx","jsxs","_jsxs","FileUpload","_ref","token","console","log","file","setFile","message","setMessage","userFiles","setUserFiles","navigate","handleFileChange","e","target","files","handleFileUpload","formData","FormData","append","post","headers","concat","error","response","status","goToUserFiles","children","type","onChange","onClick","className","to"],"sources":["/home/demmy/webstack-portfolio_project/file-upload-app/frontend/src/components/FileUpload.js"],"sourcesContent":["import React, { useState } from 'react';\nimport axios from 'axios';\nimport { Link, useNavigate } from 'react-router-dom';\n\nconst FileUpload = ({token}) => {\n\tconsole.log('Token being sent:', token);\n\tconst [file, setFile] = useState(null);\n\tconst [message, setMessage] = useState('');\n\tconst [userFiles, setUserFiles] = useState([]);\n\tconst navigate = useNavigate();\n\n\tconst handleFileChange = (e) => {\n\t\tsetFile(e.target.files[0]);\n\t\t};\n\n\tconst handleFileUpload = async () => {\n\t\tif (!file) {\n\t\t\tsetMessage('Please select a file');\n\t\t\treturn;\n\t\t\t}\n\t\tif (!token) {\n\t\t\t            setMessage('No token, please log in.');\n\t\t\t            return;\n\t\t}\n\t\tconsole.log('Token being sent:', token);\n\n\t\tconst formData = new FormData();\n\t\tformData.append('file', file);\n\n\t\ttry {\n\t\t\tawait axios.post('http://localhost:5000/api/files/upload', formData, {\n\t\t\t\theaders: {\n\t\t\t\t\t'Authorization': `Bearer ${token}`,\n\t\t\t\t\t'Content-Type': 'multipart/form-data',\n\t\t\t\t},\n\t\t\t});\n\t\t\tsetMessage('File uploaded successfully');\n\t\t} catch (error) {\n\t\t\tconsole.error('Error response:', error.response);\n\t\t\tif (error.response && error.response.status === 401) {\n\t\t\t\tsetMessage('Authorization failed, please check your token.');\n\t\t\t} else {\n\t\t\tsetMessage('Error uploading file');\n\t\t\t}\n\t\t}\n\t};\n\t /* const handleViewFiles = async () => {\n\t\tif (!token) {\n\t\t\tsetMessage('You must be logged in to view files.');\n\t\t\treturn;\n\t\t}\n\t\t          \n\t\ttry {\n\t\t\tconst response = await axios.get('http://localhost:5000/api/files/user/files', {\n\t\t\t\theaders: {\n\t\t\t\t\t'Authorization': `Bearer ${token}`,\n\t\t\t\t},\n\t\t\t});\n\t\t\tsetUserFiles(response.data);\n\t\t} catch (error) {\n\t\t\tconsole.error('Error fetching files:', error);\n\t\t\tsetMessage('Error fetching files.');\n\t\t}\n\t};*/\n\n\t  const goToUserFiles = () => {\n\t\tnavigate('/user-files');\n\t};\n\n\t  return (\n\t\t  <div>\n\t\t      <div>\n\t\t        <input type=\"file\" onChange={handleFileChange} />\n\t\t        <button onClick={handleFileUpload}>Upload</button>\n\t\t        <p>{message}</p>\n\t\t      </div>\n\t\t      <div className=\"home-button\">\n\t\t        <Link to=\"/\">\n\t\t          <button>Logout</button>\n\t\t        </Link>\n\t\t      </div>\n\t\t      <div className=\"user-files-button\">\n\t\t        <button onClick={goToUserFiles}>View My Files</button>\n\t\t      </div>\n\t\t  </div>\n\t);\n};\n\nexport default FileUpload;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}